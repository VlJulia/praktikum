(()=>{"use strict";var e,t,n,o,r={392:(e,t,n)=>{n.d(t,{TQ:()=>l,AH:()=>u});var o=n(781);const r=n.p+"b27c266b7a31e4e9766f.svg",c=n.p+"1ad06e85f169668a1f36.svg",a=n.p+"a85cc5e25106301e909e.svg";var s=n(647),i=n(299);function u(e){var t=document.querySelector(".card_del");t&&t.my&&(0,i.e)(t.id).then((function(){e?(setTimeout((function(){t.style.opacity=0}),300),setTimeout((function(){t.remove()}),500)):t.classList.remove("card_del")}))}function l(e,t,n){var i=function(e,t,n,i){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],d=document.createElement("article");if(d.className="card",d.my=n,n){var m=document.createElement("button");m.className="card__trash";var f=document.createElement("img");f.src=a,m.appendChild(f),d.appendChild(m)}d.id=i;var p=document.createElement("img");p.className="card__image",p.src=e,d.appendChild(p);var v=document.createElement("div");v.className="card__description";var y=document.createElement("h4");y.className="card__name",y.textContent=t,v.appendChild(y);var h=document.createElement("div");h.className="card__like-container";var _=document.createElement("button");_.className="card__like";var S=document.createElement("img");l?(S.src=r,h.classList.add("card__like-container_active")):S.src=c,S.alt="Лайк",_.appendChild(S),h.appendChild(_);var E=document.createElement("p");return E.className="card__like-counter",E.textContent=u,h.appendChild(E),v.appendChild(h),d.appendChild(v),h.addEventListener("click",(function(){var e,t=h.querySelector("img"),n=h.querySelector(".card__like-counter");h.classList.contains("card__like-container_active")?(e=d.id,fetch(s.rV.address+e,s.rV.content).then((function(e){return e.ok?e.json():(console.log("ERROR ".concat(e.status,": ").concat(e.statusText)),Promise.reject("ERROR ".concat(e.status,": ").concat(e.statusText)))}))).then((function(e){n.textContent=e.likes.length,h.classList.remove("card__like-container_active"),t.src=c})):function(e){return fetch(s.eo.address+e,s.eo.content).then((function(e){return e.ok?e.json():(console.log("ERROR ".concat(e.status,": ").concat(e.statusText)),Promise.reject("ERROR ".concat(e.status,": ").concat(e.statusText)))}))}(d.id).then((function(e){n.textContent=e.likes.length,h.classList.add("card__like-container_active"),t.src=r}))})),n&&(d.vanDel=!1,m.addEventListener("click",(function(){d.classList.add("card_del"),(0,o.n)("modal__are-you-sure")}))),d}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,arguments.length>5&&void 0!==arguments[5]&&arguments[5]);document.querySelector(".content").appendChild(i)}document.querySelectorAll(".card")},647:(e,t,n)=>{n.d(t,{BZ:()=>m,C7:()=>u,GU:()=>i,R4:()=>v,eo:()=>l,iG:()=>p,rV:()=>d,ut:()=>f});var o="5b389ee7-47f8-4494-8297-89d50c623772",r="https://nomoreparties.co/v1/".concat("frontend-st-cohort-201");function c(e,t){return{method:e,headers:{authorization:o,"Content-Type":"application/json"},body:JSON.stringify(t)}}function a(e){return{method:e,headers:{authorization:o}}}var s={headers:{authorization:o}},i={address:"".concat(r,"/cards"),content:s},u={address:"".concat(r,"/users/me"),content:s},l={address:"".concat(r,"/cards/likes/"),content:a("PUT")},d={address:"".concat(r,"/cards/likes/"),content:a("DELETE")},m={address:"".concat(r,"/users/me"),content:c("PATCH",{name:document.querySelector("#profile-name-edit").value,about:document.querySelector("#profile-about-self-edit").value})},f={address:"".concat(r,"/users/me/avatar"),content:c("PATCH",{avatar:document.querySelector("#profile-avatar").src})},p={address:"".concat(r,"/cards/"),content:a("DELETE")},v={address:"".concat(r,"/cards"),content:c("POST",{name:document.querySelector("#card-name").value,link:document.querySelector("#card-img-url").value})}},299:(e,t,n)=>{n.d(t,{b:()=>c,e:()=>r});var o=n(647);function r(e){return fetch(o.iG.address+e,o.iG.content).then((function(e){return e.ok?e.json():(console.log("ERROR ".concat(e.status,": ").concat(e.statusText)),Promise.reject("ERROR ".concat(e.status,": ").concat(e.statusText)))}))}function c(){var e={method:o.R4.content.method,headers:o.R4.content.headers,body:JSON.stringify({name:document.querySelector("#card-name").value,link:document.querySelector("#card-img-url").value})};return fetch(o.R4.address,e).then((function(e){return e.ok?e.json():(console.log("ERROR ".concat(e.status,": ").concat(e.statusText)),Promise.reject("ERROR ".concat(e.status,": ").concat(e.statusText)))}))}},283:(e,t,n)=>{n.d(t,{I:()=>c,N:()=>r});var o=n(647);function r(){return fetch(o.GU.address,o.GU.content).then((function(e){return e.ok?e.json():(console.log("ERROR ".concat(e.status,": ").concat(e.statusText)),Promise.reject("ERROR ".concat(e.status,": ").concat(e.statusText)))})).then((function(e){return e}))}function c(){return fetch(o.C7.address,o.C7.content).then((function(e){return e.ok?e.json():(console.log("ERROR ".concat(e.status,": ").concat(e.statusText)),Promise.reject("ERROR ".concat(e.status,": ").concat(e.statusText)))})).then((function(e){return e}))}},850:(e,t,n)=>{n.a(e,(async(e,t)=>{try{n(781);var o=n(283),r=n(392),c=await(0,o.N)(),a=await(0,o.I)();c.forEach((function(e){var t=e.likes.some((function(e){return e._id===a._id})),n=e.owner._id===a._id;(0,r.TQ)(e.link,e.name,n,e._id,e.likes.length,t)})),document.querySelector("#profile-avatar").src=a.avatar,document.querySelector("#profile-name").textContent=a.name,document.querySelector("#profile-about-self").textContent=a.about,t()}catch(e){t(e)}}),1)},781:(e,t,n)=>{function o(){if(document.querySelector(".profile").classList.contains("profile_open"))return document.querySelector(".profile").classList.remove("profile_open"),void setTimeout((function(){document.querySelector(".profile").classList.remove("profile_column")}),1e3);document.querySelector(".profile").classList.add("profile_hide"),setTimeout((function(){document.querySelector(".profile").classList.add("profile_column"),document.querySelector(".profile").classList.remove("profile_hide"),document.querySelector(".profile").classList.add("profile_open")}),500)}n.d(t,{n:()=>p});var r=n(392);Array.from(document.querySelector(".modal").children).forEach((function(e){var t=e.querySelectorAll('input:not([type="submit"]');if(t){var n=e.querySelector(".modal__button");t.forEach((function(e){e.addEventListener("input",(function(){e.checkValidity()||""==e.value?e.parentElement.classList.contains("error")&&e.parentElement.classList.toggle("error"):e.parentElement.classList.contains("error")||e.parentElement.classList.toggle("error"),function(e,t){var n=Array.from(e).every((function(e){return e.checkValidity()}));t.disabled=!n}(t,n)}))}))}}));var c=n(647),a=n(299),s=document.querySelector(".modal__new-card"),i=document.querySelector(".modal__profile-edit"),u=document.querySelector(".modal__new-avatar"),l=document.querySelector(".modal__are-you-sure"),d=document.querySelector(".overlay"),m=!1;function f(){if(d.classList.contains("show")){var e=d.querySelector(".show");d.querySelector(".modal").style.opacity=0,setTimeout((function(){d.classList.remove("show"),e.classList.remove("show")}),301),r.AH(m),m=!1,e.querySelectorAll(".modal__input").forEach((function(e){e.value="",e.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))})),document.body.style.overflow="auto"}}function p(e){d.classList.add("show"),d.querySelector(".modal").style.opacity=1,d.querySelector(".".concat(e)).classList.add("show"),document.body.style.overflow="hidden"}d.addEventListener("click",f),d.querySelector(".modal__close-button").addEventListener("click",f),d.querySelector(".modal").addEventListener("click",(function(e){e.stopPropagation()})),document.addEventListener("keyup",(function(e){"Escape"===e.key&&f()})),document.querySelector(".add-button").addEventListener("click",(function(e){e.stopPropagation(),p("modal__new-card")})),document.querySelector(".profile__avatar-hover").addEventListener("click",(function(e){e.stopPropagation(),p("modal__new-avatar")})),document.querySelector(".profile__edit-button").addEventListener("click",(function(e){e.stopPropagation(),p("modal__profile-edit")})),l.addEventListener("click",(function(e){m=!0,f()})),s.addEventListener("submit",(function(e){e.preventDefault(),(0,a.b)().then((function(e){r.TQ(e.link,e.name,!0,e._id,e.likes.length)})),f()})),i.addEventListener("submit",(function(e){var t;e.preventDefault(),(t={method:c.BZ.content.method,headers:c.BZ.content.headers,body:JSON.stringify({name:document.querySelector("#profile-name-edit").value,about:document.querySelector("#profile-about-self-edit").value})},fetch(c.BZ.address,t).then((function(e){return e.ok?e.json():(console.log("ERROR ".concat(e.status,": ").concat(e.statusText)),Promise.reject("ERROR ".concat(e.status,": ").concat(e.statusText)))}))).then((function(e){var t,n;document.querySelector("#profile-name").textContent=e.name,document.querySelector("#profile-about-self").textContent=e.about,document.querySelector(".profile").classList.contains("profile_open")&&o(),t=document.querySelector(".profile__about-self"),n=document.querySelector(".profile__name"),t.scrollWidth<=t.clientWidth&&n.scrollWidth<=n.clientWidth?(document.querySelector(".profile").removeEventListener("click",o),document.querySelector(".profile").style.cursor="unset"):(document.querySelector(".profile").addEventListener("click",o),document.querySelector(".profile").style.cursor="pointer")})),f()})),u.addEventListener("submit",(function(e){e.preventDefault();var t=u.querySelector("input[name='avatar-img-url']").value;fetch(c.ut.address,c.ut.content),document.querySelector("#profile-avatar").src=t,f()}))}},c={};function a(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={exports:{}};return r[e](n,n.exports,a),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",o=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},a.a=(r,c,a)=>{var s;a&&((s=[]).d=-1);var i,u,l,d=new Set,m=r.exports,f=new Promise(((e,t)=>{l=t,u=e}));f[t]=m,f[e]=e=>(s&&e(s),d.forEach(e),f.catch((e=>{}))),r.exports=f,c((r=>{var c;i=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var c=[];c.d=0,r.then((e=>{a[t]=e,o(c)}),(e=>{a[n]=e,o(c)}));var a={};return a[e]=e=>e(c),a}}var s={};return s[e]=e=>{},s[t]=r,s})))(r);var a=()=>i.map((e=>{if(e[n])throw e[n];return e[t]})),u=new Promise((t=>{(c=()=>t(a)).r=0;var n=e=>e!==s&&!d.has(e)&&(d.add(e),e&&!e.d&&(c.r++,e.push(c)));i.map((t=>t[e](n)))}));return c.r?u:a()}),(e=>(e?l(f[n]=e):u(m),o(s)))),s&&s.d<0&&(s.d=0)},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.p="",a(850)})();